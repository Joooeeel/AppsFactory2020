{"version":3,"sources":["webpack://server/./src/config/database.js","webpack://server/./src/config/swagger.js","webpack://server/./src/controllers/api/index.js","webpack://server/./src/controllers/api/users/index.js","webpack://server/./src/database/index.js","webpack://server/./src/documentation/index.js","webpack://server/./src/index.js","webpack://server/./src/middlewares/error-handler.js","webpack://server/./src/middlewares/index.js","webpack://server/./src/middlewares/restricted-access.js","webpack://server/./src/models/users/index.js","webpack://server/./src/models/users/schema.js","webpack://server/./src/utils/access.js","webpack://server/external \"@babel/runtime/helpers/asyncToGenerator\"","webpack://server/external \"@babel/runtime/regenerator\"","webpack://server/external \"body-parser\"","webpack://server/external \"cors\"","webpack://server/external \"express\"","webpack://server/external \"http\"","webpack://server/external \"jsonwebtoken\"","webpack://server/external \"sequelize\"","webpack://server/external \"swagger-jsdoc\"","webpack://server/external \"swagger-ui-express\"","webpack://server/webpack/bootstrap","webpack://server/webpack/runtime/compat get default export","webpack://server/webpack/runtime/define property getters","webpack://server/webpack/runtime/hasOwnProperty shorthand","webpack://server/webpack/runtime/make namespace object","webpack://server/webpack/startup"],"names":["host","user","password","database","connectionLimit","swaggerConfig","definition","openapi","info","title","version","components","securitySchemes","ApiKeyAuth","type","name","security","securityDefinitions","basicAuth","apis","app","use","UsersController","req","res","send","router","express","post","asyncHandler","mail","body","pass","UsersModel","sendStatus","token","createToken","id","get","data","params","getById","restrictedAccess","put","patch","userId","query","dbConfig","db","Sequelize","dialect","raw","onConnect","authenticate","sync","console","log","Documentation","swaggerSpec","swaggerJSDoc","swaggerUi","port","process","Middlewares","ApiControllers","ConnectDatabase","server","http","listen","controller","next","Promise","resolve","err","error","toString","socketHandler","msg","bodyParser","cors","header","method","end","getHeader","headers","status","verifyToken","create","Schema","update","where","remove","getByEmailAndPassword","require","DataTypes","User","STRING","secret","decodeToken","jwt","callback"],"mappings":"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","file":"bundle.js","sourcesContent":["export default {\n    host: 'localhost',\n    user: 'root',\n    password: '',\n    database: 'prueba',\n    connectionLimit: 10,\n};","export const swaggerConfig = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'Test API',\n      version: '1.0.0',\n    },\n    components: {\n      securitySchemes: {\n        ApiKeyAuth: {\n          type: 'apiKey',\n          name: 'x-access-token',\n          in: 'header',\n        },\n      },\n    },\n    security: [\n      { ApiKeyAuth: [] },\n    ],\n    securityDefinitions: {\n        basicAuth: {\n            type: 'basic'\n        },\n    },\n  },\n  // Path to the API docs\n  apis: ['./src/controllers/**/*.js', './src/controllers/**/*.yml'],\n};\n\n","import UsersController from './users';\n\nexport default function (app) {\n  // Private\n  app.use('/users', UsersController);\n\n  app.use('/', (req, res) => res.send(`Working like a charm ٩(^‿^)۶`));\n}\n","import express from 'express';\nimport * as UsersModel from \"@Models/users\";\nimport { asyncHandler } from \"@Middlwares/error-handler\";\nimport restrictedAccess from \"@Middlwares/restricted-access\";\nimport { getById } from '../../../models/users';\n\nconst router = express.Router();\n\nrouter.post(\"/login\", asyncHandler(async (req, res) => {\n  const mail = req.body.mail;\n  const pass = req.body.pass;\n  if (!mail || !pass) return res.send(400);\n  const user = await UsersModel.getByEmailAndPassword(mail, pass);\n\n  if (!user) {\n    return res.sendStatus(403);\n  }\n  const token = createToken({ id: user.id });\n  res.send(token);\n})\n);\n\n// GET ALL\nrouter.get('/', asyncHandler(async (req, res) => {\n  const data = await UsersModel.get();\n  res.send(data);\n}));\n\n// GET BY ID\nrouter.get('/:id', asyncHandler(async (req, res) => {\n  const { params: { id } } = req;\n\n  const user = getById(id);\n\n  res.send(`User id: ${user}`);\n}));\n\n//Create\nrouter.post(\"/\", asyncHandler(async (req, res) => {\n  const mail = req.body.mail;\n  const pass = req.body.pass;\n  await UsersModel.create(mail, pass)\n  res.send('Usuario creado con éxito');\n}));\n\n// DELETE\nrouter.delete(\"/:id\", restrictedAccess, asyncHandler(async (req, res) => {\n  const { params: { id } } = req;\n  await UsersModel.remove(id);\n  res.send(`User id: ${id} deleted`);\n}));\n\n// TOTAL UPDATE\nrouter.put(\"/:id\", restrictedAccess, async (req, res) => {\n  const { params: { id }, body } = req;\n  await UsersModel.update(id, body);\n  res.send(`User id: ${id} updated`);\n});\n\n// PARCIAL UPDATE\nrouter.patch(\"/:id\", restrictedAccess, async (req, res) => {\n\n});\n\n\nrouter.get(\"/restricted-path\", restrictedAccess, asyncHandler(async (req, res) => {\n  const { query: { userId } } = req;\n  res.send(`User id: ${req.userId}`);\n}));\n\n\nexport default router;","import { Sequelize } from 'sequelize';\nimport dbConfig from '../config/database';\n\nconst { database, user, password, host } = dbConfig;\n\nexport const db = new Sequelize(database, user, password, {\n    host,\n\tdialect: 'mysql',\n\tquery: { raw: true }\n});\n\nexport default async (onConnect) => {\n\ttry {\n        await db.authenticate();\n        db.sync();\n        onConnect();\n\t\tconsole.log('Database connection OK!');\n\t} catch (error) {\n\t\tconsole.log('Unable to connect to the database:');\n\t}\n}","import swaggerJSDoc from \"swagger-jsdoc\";\nimport swaggerUi from \"swagger-ui-express\";\nimport { swaggerConfig, options } from \"../config/swagger\";\n\nconst Documentation = (app) => {\n  // JSON of specs\n  const swaggerSpec = swaggerJSDoc(swaggerConfig);\n\n  // Api entrypoint\n  app.use(\"/docs\", swaggerUi.serve, swaggerUi.setup(swaggerSpec));\n};\n\nexport default Documentation;\n","import express from 'express';\nimport http from 'http';\nimport Middlewares from './middlewares';\nimport ApiControllers from './controllers/api';\nimport Documentation from './documentation';\nimport ConnectDatabase from './database';\n\nconst app = express();\n/*\nHeroku utiliza la variable de entorno process.env.port para asignar el puerto donde se va ejecutar el servidor,\npor eso la hemos definido en esta plantilla\n*/\nconst port = process.env.PORT;\n\nDocumentation(app);\nMiddlewares(app);\nApiControllers(app);\nConnectDatabase(() => {\n    const server = http.createServer(app);\n    server.listen(port, () => console.log(`Server listening to http://localhost:${port}`));\n});\n\n","/*Tenemos una función que recibe como parámetro la función de cada controlador,\nla ejecuta (resolve)\ny si  hay algún error, lo mostrará por consola y lanzará un 500\n*/\n\nexport const asyncHandler = controller => (req, res, next) => Promise\n  .resolve(controller(req, res, next))\n  .catch((err) => {\n    console.error('Request error:' + err.toString());\n    if (err) return res.sendStatus(500).send();\n});\n \nexport const socketHandler = controller => msg => Promise\n  .resolve(controller(msg))\n  .catch((err) => {\n    console.error('Socket error:' + err);\n});","import cors from 'cors';\nimport bodyParser from 'body-parser';\n\nconst Middlewares = (app) => {\n    app.use(bodyParser.urlencoded());\n    app.use(bodyParser.json());\n    app.use(cors()) // Use this after the variable declaration\n    app.use(function (req, res, next) {\n        res.header('Access-Control-Allow-Origin', '*');\n        res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n        res.header('Access-Control-Allow-Credentials', true);\n        res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');\n    \n        if (req.method === 'OPTIONS') {\n            res.end();\n        } else {\n            next();\n        }\n    });\n};\n\nexport default Middlewares;","import { verifyToken } from '../utils/access';\nexport const getHeader = (req, header) => req.headers[header];\n\nexport default (req, res, next) => {\n  const token = getHeader(req, 'x-access-token');\n  \n  if (!token) {\n    return res.status(400).send('No token provided.');\n  }\n  return verifyToken(token, (err, { id } = {}) => {\n    if (err) {\n      return res.status(401).send('Failed to authenticate token.');\n    }\n\n    if (!id) {\n      return res.status(403).send('Wrong credentials');\n    }\n    req.userId = id;\n    return next();\n  });\n}","import Schema from './schema';\n\nexport const create = (mail, password) => Schema.create({\n    mail,\n    password,\n});\n\nexport const update = (id, data) => Schema.update(data, { where: { id } });\n\nexport const remove = id => Schema.destroy({ where: { id } });\n\nexport const getByEmailAndPassword = (mail, password) => Schema.findOne({\n    where: {\n        mail,\n        password\n    }\n});\n\nexport const getById = (id) => Schema.findOne({\n    where: {\n        id\n    }\n});\n\nexport const get = () => Schema.findAll();\n","import { db } from '../../database';\r\nconst { DataTypes } = require('sequelize');\r\n\r\nconst User = db.define('user', {\r\n\tpassword: DataTypes.STRING,\r\n\tmail: DataTypes.STRING,\r\n});\r\n\r\nexport default User;","import jwt from 'jsonwebtoken';\n\nconst secret = 'secret';\n\nexport const decodeToken = jwt.decode;\n\nexport const createToken = data => jwt.sign(data, secret);\n\nexport const verifyToken = (token, callback) => jwt.verify(token, secret, callback);","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");;","module.exports = require(\"@babel/runtime/regenerator\");;","module.exports = require(\"body-parser\");;","module.exports = require(\"cors\");;","module.exports = require(\"express\");;","module.exports = require(\"http\");;","module.exports = require(\"jsonwebtoken\");;","module.exports = require(\"sequelize\");;","module.exports = require(\"swagger-jsdoc\");;","module.exports = require(\"swagger-ui-express\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}